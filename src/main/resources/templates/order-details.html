<!DOCTYPE html>
<html lang="da" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Olsker Cupcakes - Ordredetaljer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" th:href="@{/css/stylesheet.css}"/>
</head>
<body>

<div th:replace="~{fragments :: headerFragment}"></div>

<main>
    <div class="orders-view">
        <h1>Ordredetaljer</h1>
        <h2>Ordre ID: <span th:text="${id}"></span></h2>

        <div class="orders-table">
            <h3>Produkter i ordren</h3>

            <div th:each="orderLine : ${orderLines}" class="order-detail-card window-styling">
                <div class="order-detail-cupcake">
                    <img class="order-detail-bottom"
                         th:src="@{/images/cupcakes/bottoms/bottom_{slug}.png(slug=${orderLine.cupcake.bottom.slug})}"
                         th:attr="onerror=|this.onerror=null;this.src='@{/images/cupcakes/bottoms/bottom_placeholder.png}'|"
                         alt="bottom">
                    <img class="order-detail-topping"
                         th:src="@{/images/cupcakes/toppings/topping_{slug}.png(slug=${orderLine.cupcake.topping.slug})}"
                         th:attr="onerror=|this.onerror=null;this.src='@{/images/cupcakes/toppings/topping_placeholder.png}'|"
                         alt="topping">
                </div>
                <div class="order-detail-info">
                    <p><strong>Cupcake:</strong>
                        <span th:text="${orderLine.cupcake.bottom.name}"></span> +
                        <span th:text="${orderLine.cupcake.topping.name}"></span>
                    </p>
                    <p><strong>Antal:</strong> <span th:text="${orderLine.quantity}"></span> stk.</p>
                    <p><strong>Pris:</strong> <span th:text="${orderLine.orderLinePrice}"></span> kr.</p>
                </div>
            </div>
        </div>

        <p id="error-message" class="error"
           th:if="${errorMessage != null}"
           th:text="${errorMessage}">
        </p>

        <div th:if="${session.currentUser.isAdmin}" class="back-home">
            <a th:href="@{/orders}" class="checkout-button">Tilbage til ordrer</a>
        </div>

        <div th:unless="${session.currentUser.isAdmin}" class="back-home">
            <a th:href="@{/user/orders}" class="checkout-button">Tilbage til ordrer</a>
        </div>
    </div>
</main>

<div th:replace="~{fragments :: footerFragment}"></div>

</body>
</html>