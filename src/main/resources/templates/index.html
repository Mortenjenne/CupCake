<!DOCTYPE html>
<html lang="da" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Olsker Cupcakes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- Thymeleaf vil erstatte th:href; den “plain” href virker ved ren statisk visning -->
    <link rel="stylesheet" href="/public/css/stylesheet.css" th:href="@{/css/stylesheet.css}"/>
</head>
<body>

<div th:replace="~{fragments :: headerFragment}"></div>

<main>

    <section class="index-body">
        <section class="welcome">
            <h1>Velkommen til Olsker Cupcakes</h1>
            <h2>Øens bedste cupcakes</h2>
        </section>

        <section class="cupcake-box">
            <img class="topping-img" src="/images/cupcakes/toppings/topping_jordbaer.png"
                 th:src="@{/images/cupcakes/toppings/topping_jordbaer.png}"
                 data-fallback="/images/cupcakes/toppings/topping_placeholder.png"
                 alt="cupcake Topping"/>
            <img class="bottom-img" src="/images/cupcakes/bottoms/bottom_chokolade.png"
                 th:src="@{/images/cupcakes/bottoms/bottom_chokolade.png}"
                 data-fallback="/images/cupcakes/bottoms/bottom_placeholder.png"
                 alt="Cupcake Bottom"/>
        </section>

        <h4 class="title">Vælg og bestil her</h4>

        <section class="cupcake-creator">
            <form method="post" th:action="@{/cart/add}">

                <div class="cupcake-creator-select">
                    <select id="bottomSelect" name="bottomId" required>
                        <option value="" disabled selected hidden>Vælg bund</option>
                        <option th:each="b : ${bottoms}"
                                th:value="${b.bottomId}"
                                th:text="${b.name + ' • ' + b.price + ' kr'}"
                                th:attr="data-img=@{/images/cupcakes/bottoms/bottom_{slug}.png(slug=${b.slug})}">
                        </option>
                    </select>
                </div>


                <div class="cupcake-creator-select">
                    <select id="toppingSelect" name="toppingId" required>
                        <option value="" disabled selected hidden>Vælg topping</option>
                        <option th:each="t : ${toppings}"
                                th:value="${t.toppingId}"
                                th:text="${t.name + ' • ' + t.price + ' kr'}"
                                th:attr="data-img=@{/images/cupcakes/toppings/topping_{slug}.png(slug=${t.slug})}">
                        </option>
                    </select>
                </div>

                <input class="cupcake-creator-input" type="number" name="cupcakeQuantity" min="1" placeholder="Antal"
                       th:value="${cupcakeQuantity}"
                       required>

                <button class="add-to-basket-index" type="submit">Tilføj til kurv</button>

            </form>
            <div th:if="${succesLabel != null}" class="title">
                <p th:if="${succesLabel != null}" th:text="${succesLabel}"></p>
                <p th:if="${session.indexErrorLabel != null}" th:text="${session.indexErrorLabel}"></p>
            </div>
            <div th:unless="${succesLabel != null}">
                <br>
            </div>
        </section>

        <a class="index-basket-button" href="basket.html" th:href="@{/basket}">Gå til kurv ➡</a>


    </section>

</main>

<div th:replace="~{fragments :: footerFragment}"></div>

<script src="/public/js/cupcake-script.js" th:src="@{/js/cupcake-image-script.js}"></script>

</body>
</html>
